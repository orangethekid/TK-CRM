@page "/User/edit/{userId:guid}"

<h3>แก้ไขข้อมูลผู้ใช้</h3>
<div class="container">
    <EditForm Model="@userEditRequest" OnValidSubmit="@HandleValidSubmit">
        <DataAnnotationsValidator />
        <form role="form">
            <div class="alert @statusClass">@statusMessage</div>
            <div class="row mb-2">
                <h5>ข้อมูลผู้ใช้</h5>
            </div>
            <div class="form-group row">
                <label class="col-lg-3 col-form-label form-control-label">
                    ชื่อผู้ใช้ <span class="text-danger">*</span>
                </label>
                <div class="col-lg-9">
                    <InputText @bind-Value="@userEditRequest.DisplayName" class="form-control w-50" />
                    <ValidationMessage For="@(() => userEditRequest.DisplayName)" />
                </div>
            </div>
            <div class="form-group row">
                <label class="col-lg-3 col-form-label form-control-label">
                    บัญชีผู้ใช้ <span class="text-danger">*</span>
                </label>
                <div class="col-lg-9">

                    <InputText @bind-Value="@userEditRequest.UserName" class="form-control w-50" disabled="true" />
                    <ValidationMessage For="@(() => userEditRequest.UserName)" />
                </div>
            </div>
            <div class="form-group row">
                <label class="col-lg-3 col-form-label form-control-label">
                    รหัสผ่านใหม่
                </label>
                <div class="col-lg-9">
                    <InputText type="password" @bind-Value="@userEditRequest.NewPassword" class="form-control w-50" />
                </div>
            </div>
            <div class="form-group row">
                <label class="col-lg-3 col-form-label form-control-label">
                    ยืนยันรหัสผ่านใหม่
                </label>
                <div class="col-lg-9">
                    <InputText type="password" @bind-Value="@userEditRequest.NewPasswordConfirm" class="form-control w-50" />
                </div>
            </div>
            <div class="form-group row">
                <label class="col-lg-3 col-form-label form-control-label">
                    อีเมล <span class="text-danger">*</span>
                </label>
                <div class="col-lg-9">
                    <InputText @bind-Value="@userEditRequest.Email" class="form-control w-50" />
                    <ValidationMessage For="@(() => userEditRequest.Email)" />
                </div>
            </div>
            @if (userEditRequest.UserName != "admin")
            {
                <div class="form-group row">
                    <label class="col-lg-3 col-form-label form-control-label">
                        ตำแหน่ง <span class="text-danger">*</span>
                    </label>
                    <div class="col-lg-9">
                        <select @bind="userEditRequest.Role" class="form-control w-50">
                            <option value="subadmin"> Admin (sub) </option>
                            <option value="customerservice"> Customer Service </option>
                            <option value="sale"> Sale </option>
                        </select>
                        <ValidationMessage For="@(() => userEditRequest.Role)" />
                    </div>
                </div>
            }
        </form>
        <br />
        <div class="d-block text-center">
            <button type="submit" class="btn btn-success">
                บันทึก
            </button>
        </div>
    </EditForm>
</div>